<template>
    <div class="slds-card slds-p-around_medium slds-m-around_medium">
       <div class="slds-card slds-p-around_medium slds-m-around_medium">
        <!-- City Input -->
        <div class="slds-form-element">
            <lightning-input 
                name="searchKey"
                label="City Name" 
                value={searchKey} 
                onchange={handleInputChange} 
                placeholder="Start typing a city...">
            </lightning-input>
        </div>

        <!-- Autocomplete Suggestions -->
        <template if:true={suggestions}>
            <ul class="slds-m-top_x-small slds-listbox slds-listbox_vertical slds-scrollable_y" style="max-height: 200px;">
                <template for:each={suggestions} for:item="city">
                    <li 
                        key={city.place_id} 
                        onclick={handleCitySelect} 
                        data-name={city.name} 
                        data-lat={city.lat} 
                        data-long={city.lon}
                        class="slds-listbox__item city-option slds-p-around_x-small slds-has-focus"
                        style="cursor:pointer;"
                    >
                        <span class="slds-media slds-media_center">
                            <lightning-icon icon-name="utility:location" size="xx-small" class="slds-m-right_x-small"></lightning-icon>
                            <span class="slds-truncate">{city.name}</span>
                        </span>
                    </li>
                </template>
            </ul>
        </template>
        <div class="slds-grid slds-wrap slds-m-top_medium">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-p-around_x-small">
                <lightning-input 
                    name="checkInDate"
                    type="date" 
                    label="Check-In Date" 
                    value={checkInDate} 
                    min={today}
                    onchange={handleInputChange}>
                </lightning-input>
            </div>

            <!-- Check-Out -->
            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-p-around_x-small">
                <lightning-input 
                    name="checkOutDate"
                    type="date" 
                    label="Check-Out Date" 
                    value={checkOutDate} 
                    min={today}
                    onchange={handleInputChange}>
                </lightning-input>
            </div>

            <!-- Number of Adults -->
            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-p-around_x-small">
                <lightning-input 
                    name="numAdults"
                    type="number" 
                    label="No. of Adults" 
                    value={numAdults} 
                    min="1" 
                    onchange={handleInputChange}>
                </lightning-input>
            </div>

            <!-- Room Quantity -->
            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-p-around_x-small">
                <lightning-input 
                    name="roomQuantity"
                    type="number" 
                    label="Room Quantity" 
                    value={roomQuantity} 
                    min="1" 
                    onchange={handleInputChange}>
                </lightning-input>
            </div>
        </div>

        <!-- Search Button -->
        <div class="slds-m-top_medium">
            <lightning-button 
                variant="brand" 
                label="Search Hotels" 
                disabled={submitdisabled}
                onclick={handleSearchClick}>
            </lightning-button>
        </div>

      

        <template if:true={displayHotels}>
            <div class="slds-m-top_large">
                <c-display-hotels
                        lat={lat}
                        long={long}
                        check-in-date={checkInDate}
                        check-out-date={checkOutDate}
                        num-adults={numAdults}
                        room-quantity={roomQuantity}>
                </c-display-hotels>
            </div>
        </template>
    </div>
    </div>
</template>
